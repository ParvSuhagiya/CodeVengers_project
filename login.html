<!-- <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Login - Expense Manager</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
      background-color: #121212;
      color: #ffffff;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }
    .login-container {
      background-color: #1e1e1e;
      padding: 30px;
      border-radius: 12px;
      width: 320px;
      text-align: center;
      box-shadow: 0 4px 15px rgba(0,0,0,0.6);
    }
    .login-container h2 { color: #00d4ff; }
    input, select, button {
      width: 100%;
      padding: 12px;
      margin: 10px 0;
      border-radius: 8px;
      border: none;
      font-size: 14px;
    }
    input, select { background: #2c2c2c; color: #fff; }
    button { background: #00d4ff; color: #121212; font-weight: bold; cursor: pointer; }
    button:hover { background: #00aacc; }
  </style>
</head>
<body>
  <div class="login-container">
    <h2>Expense Manager</h2>
    <input type="text" id="userid" placeholder="User ID" required>
    <input type="password" id="password" placeholder="Password" required>
    <select id="role" required>
      <option value="">Select Role</option>
      <option value="employee">Employee</option>
      <option value="manager">Manager</option>
      <option value="admin">Admin</option>
    </select>
    <button onclick="login()">Login</button>
    <button onclick="register()">Register</button>
  </div>

  <script src="serer.js"></script>
  <script>
    const API_URL = "http://localhost:5000";

    async function register() {
      const id = document.getElementById("userid").value;
      const password = document.getElementById("password").value;
      const role = document.getElementById("role").value;

      let res = await fetch(`${API_URL}/register`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ id, password, role })
      });
      let data = await res.json();
      alert(data.message);
    }

    async function login() {
      const id = document.getElementById("userid").value;
      const password = document.getElementById("password").value;
      const role = document.getElementById("role").value;

      let res = await fetch(`${API_URL}/login`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ id, password, role })
      });
      let data = await res.json();

      if (res.ok) {
        alert("Login successful as " + role);
        if (role === "employee") window.location.href = "employee.html";
        else if (role === "manager") window.location.href = "manager.html";
        else if (role === "admin") window.location.href = "admin.html";
      } else {
        alert(data.message);
      }
    }
  </script>
</body>
</html>



 -->


 <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expense Manager - Authentication</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');

        :root {
            --background-color: #0a0a0a;
            --surface-color: rgba(20, 20, 20, 0.85);
            --primary-color: #00d4ff;
            --primary-hover-color: #00b8e6;
            --text-color: #ffffff;
            --text-secondary-color: #a0a0a0;
            --input-color: #1a1a1a;
            --input-border: rgba(255, 255, 255, 0.1);
            --success-color: #2ecc71;
            --error-color: #e74c3c;
            --warning-color: #f39c12;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
            padding: 20px;
        }

        /* Enhanced Animated Grid Background */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image:
                linear-gradient(to right, rgba(0, 212, 255, 0.08) 1px, transparent 1px),
                linear-gradient(to bottom, rgba(0, 212, 255, 0.08) 1px, transparent 1px);
            background-size: 50px 50px;
            animation: pan-grid 40s linear infinite;
            z-index: 0;
        }

        /* Floating particles effect */
        body::after {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 20% 50%, rgba(0, 212, 255, 0.1) 0%, transparent 50%),
                        radial-gradient(circle at 80% 80%, rgba(0, 212, 255, 0.08) 0%, transparent 50%);
            animation: float-particles 15s ease-in-out infinite;
            z-index: 0;
            pointer-events: none;
        }

        @keyframes pan-grid {
            0% { background-position: 0 0; }
            100% { background-position: 50px 50px; }
        }

        @keyframes float-particles {
            0%, 100% { opacity: 0.3; transform: translateY(0); }
            50% { opacity: 0.6; transform: translateY(-20px); }
        }

        /* Glassmorphism Container with enhanced effects */
        .auth-container {
            background: var(--surface-color);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            padding: 45px 40px;
            border-radius: 20px;
            width: 100%;
            max-width: 420px;
            text-align: center;
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.6),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.1);
            animation: fade-in 0.6s cubic-bezier(0.16, 1, 0.3, 1);
            position: relative;
            z-index: 1;
        }

        @keyframes fade-in {
            from { 
                opacity: 0; 
                transform: translateY(30px) scale(0.95); 
            }
            to { 
                opacity: 1; 
                transform: translateY(0) scale(1); 
            }
        }

        /* Title with gradient effect */
        .auth-container h2 {
            background: linear-gradient(135deg, var(--primary-color) 0%, #00a8cc 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
            font-weight: 700;
            font-size: 24px;
            letter-spacing: -0.5px;
        }

        .subtitle {
            color: var(--text-secondary-color);
            font-size: 13px;
            margin-bottom: 30px;
            font-weight: 400;
        }

        /* Enhanced Input Groups with smooth transitions */
        .input-group {
            width: 100%;
            margin-bottom: 18px;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            overflow: hidden;
            max-height: 200px;
            opacity: 1;
        }

        .input-group.hidden {
            max-height: 0;
            margin-bottom: 0;
            opacity: 0;
            pointer-events: none;
        }

        .input-wrapper {
            position: relative;
        }

        input, select {
            width: 100%;
            padding: 14px 16px;
            border-radius: 12px;
            border: 1.5px solid var(--input-border);
            font-size: 15px;
            background: var(--input-color);
            color: var(--text-color);
            font-family: 'Poppins', sans-serif;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-weight: 400;
        }
        
        input::placeholder {
            color: var(--text-secondary-color);
            opacity: 0.6;
        }

        input:hover, select:hover {
            border-color: rgba(0, 212, 255, 0.4);
            background: rgba(26, 26, 26, 0.8);
        }

        input:focus, select:focus {
            outline: none;
            border-color: var(--primary-color);
            background: rgba(26, 26, 26, 0.9);
            box-shadow: 
                0 0 0 3px rgba(0, 212, 255, 0.1),
                0 4px 12px rgba(0, 212, 255, 0.15);
            transform: translateY(-1px);
        }
        
        /* Enhanced Select Dropdown */
        select {
            appearance: none;
            -webkit-appearance: none;
            background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%2300d4ff%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E');
            background-repeat: no-repeat;
            background-position: right 16px top 50%;
            background-size: 0.6em auto;
            padding-right: 40px;
            cursor: pointer;
        }
        
        select:required:invalid { 
            color: var(--text-secondary-color);
            opacity: 0.7;
        }
        
        select option { 
            background-color: #1a1a1a; 
            color: var(--text-color);
            padding: 10px;
        }
        
        select option:hover {
            background-color: var(--primary-color);
        }

        /* Password strength indicator */
        .password-strength {
            height: 3px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            margin-top: 6px;
            overflow: hidden;
            display: none;
        }

        .password-strength.active {
            display: block;
        }

        .password-strength-bar {
            height: 100%;
            width: 0;
            transition: all 0.3s ease;
            border-radius: 3px;
        }

        .password-strength-bar.weak {
            width: 33%;
            background: var(--error-color);
        }

        .password-strength-bar.medium {
            width: 66%;
            background: var(--warning-color);
        }

        .password-strength-bar.strong {
            width: 100%;
            background: var(--success-color);
        }

        /* Enhanced Button with better interactions */
        button[type="submit"] {
            width: 100%;
            padding: 15px;
            border-radius: 12px;
            border: none;
            font-size: 16px;
            background: linear-gradient(135deg, var(--primary-color) 0%, #00a8cc 100%);
            color: #0a0a0a;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            margin-top: 10px;
            letter-spacing: 0.3px;
        }

        button[type="submit"]::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.5s;
        }

        button[type="submit"]:hover::before {
            left: 100%;
        }

        button[type="submit"]:hover {
            transform: translateY(-2px);
            box-shadow: 
                0 6px 20px rgba(0, 212, 255, 0.4),
                0 0 40px rgba(0, 212, 255, 0.2);
        }

        button[type="submit"]:active {
            transform: translateY(0);
        }
        
        button[type="submit"]:disabled {
            background: linear-gradient(135deg, #333 0%, #555 100%);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .button-content {
            position: relative;
            z-index: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .spinner {
            display: none;
            border: 2px solid rgba(10, 10, 10, 0.3);
            border-radius: 50%;
            border-top: 2px solid #0a0a0a;
            width: 18px;
            height: 18px;
            animation: spin 0.8s linear infinite;
        }

        .spinner.active {
            display: inline-block;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Toggle Links with better styling */
        .toggle-section {
            margin-top: 28px;
            padding-top: 24px;
            border-top: 1px solid rgba(255, 255, 255, 0.08);
        }

        .toggle-text {
            color: var(--text-secondary-color);
            font-size: 14px;
            margin-bottom: 12px;
            font-weight: 400;
        }

        .toggle-text a {
            color: var(--primary-color);
            font-weight: 600;
            text-decoration: none;
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
        }

        .toggle-text a::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--primary-color);
            transition: width 0.3s ease;
        }

        .toggle-text a:hover::after {
            width: 100%;
        }

        .toggle-text a:hover {
            color: var(--primary-hover-color);
        }

        .forgot-password {
            font-size: 13px;
            margin-top: 8px;
        }

        /* Enhanced Notification System */
        #notification {
            position: fixed;
            top: -100px;
            left: 50%;
            transform: translateX(-50%);
            padding: 16px 28px;
            border-radius: 12px;
            color: white;
            font-weight: 500;
            font-size: 14px;
            box-shadow: 
                0 8px 24px rgba(0, 0, 0, 0.4),
                0 2px 8px rgba(0, 0, 0, 0.2);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 1000;
            backdrop-filter: blur(10px);
            min-width: 280px;
            text-align: center;
        }

        #notification.show {
            top: 30px;
        }

        #notification.success {
            background: linear-gradient(135deg, var(--success-color), #27ae60);
        }

        #notification.error {
            background: linear-gradient(135deg, var(--error-color), #c0392b);
        }

        /* Role-specific styling */
        .role-description {
            font-size: 12px;
            color: var(--text-secondary-color);
            margin-top: 5px;
            text-align: left;
            padding: 0 5px;
            transition: all 0.3s ease;
        }

        /* Responsive Design */
        @media (max-width: 480px) {
            .auth-container {
                padding: 35px 28px;
            }

            .auth-container h2 {
                font-size: 22px;
            }

            input, select, button[type="submit"] {
                font-size: 14px;
                padding: 13px 14px;
            }
        }

        /* Form validation styles */
        input:invalid:not(:placeholder-shown) {
            border-color: var(--error-color);
        }

        input:valid:not(:placeholder-shown) {
            border-color: var(--success-color);
        }
    </style>
</head>
<body>
    <div id="notification"></div>
    
    <div class="auth-container">
        <h2 id="form-title">Sign In</h2>
        <p class="subtitle" id="subtitle">Welcome back! Please sign in to continue</p>
        
        <form id="auth-form" novalidate>
            <!-- Name Field (Sign Up Only) -->
            <div class="input-group hidden" id="name-group">
                <div class="input-wrapper">
                    <input 
                        type="text" 
                        id="name" 
                        placeholder="Full Name"
                        autocomplete="name"
                    >
                </div>
            </div>

            <!-- User ID Field -->
            <div class="input-group">
                <div class="input-wrapper">
                    <input 
                        type="text" 
                        id="userid" 
                        placeholder="User ID" 
                        required
                        autocomplete="username"
                    >
                </div>
            </div>

            <!-- Email Field (Sign Up Only) -->
            <div class="input-group hidden" id="email-group">
                <div class="input-wrapper">
                    <input 
                        type="email" 
                        id="email" 
                        placeholder="Email Address"
                        autocomplete="email"
                    >
                </div>
            </div>

            <!-- Password Field -->
            <div class="input-group">
                <div class="input-wrapper">
                    <input 
                        type="password" 
                        id="password" 
                        placeholder="Password" 
                        required
                        autocomplete="current-password"
                    >
                    <div class="password-strength" id="password-strength">
                        <div class="password-strength-bar" id="password-strength-bar"></div>
                    </div>
                </div>
            </div>

            <!-- Role Selection Field -->
            <div class="input-group">
                <select id="role" required>
                    <option value="" disabled selected>Select Your Role</option>
                    <option value="admin">Admin</option>
                    <option value="manager">Manager</option>
                    <option value="employee">Employee</option>
                </select>
                <div class="role-description" id="role-description">
                    Select your role to access appropriate features
                </div>
            </div>

            <!-- Confirm Password (Sign Up Only) -->
            <div class="input-group hidden" id="confirm-password-group">
                <div class="input-wrapper">
                    <input 
                        type="password" 
                        id="confirm-password" 
                        placeholder="Confirm Password"
                        autocomplete="new-password"
                    >
                </div>
            </div>

            <!-- Country Selection (Sign Up Only) -->
            <div class="input-group hidden" id="country-group">
                <select id="country">
                    <option value="" disabled selected>Select Your Country</option>
                    <option value="US">ðŸ‡ºðŸ‡¸ United States</option>
                    <option value="GB">ðŸ‡¬ðŸ‡§ United Kingdom</option>
                    <option value="CA">ðŸ‡¨ðŸ‡¦ Canada</option>
                    <option value="AU">ðŸ‡¦ðŸ‡º Australia</option>
                    <option value="IN">ðŸ‡®ðŸ‡³ India</option>
                    <option value="DE">ðŸ‡©ðŸ‡ª Germany</option>
                    <option value="FR">ðŸ‡«ðŸ‡· France</option>
                    <option value="JP">ðŸ‡¯ðŸ‡µ Japan</option>
                    <option value="CN">ðŸ‡¨ðŸ‡³ China</option>
                    <option value="BR">ðŸ‡§ðŸ‡· Brazil</option>
                    <option value="MX">ðŸ‡²ðŸ‡½ Mexico</option>
                    <option value="IT">ðŸ‡®ðŸ‡¹ Italy</option>
                    <option value="ES">ðŸ‡ªðŸ‡¸ Spain</option>
                    <option value="KR">ðŸ‡°ðŸ‡· South Korea</option>
                    <option value="NL">ðŸ‡³ðŸ‡± Netherlands</option>
                    <option value="SE">ðŸ‡¸ðŸ‡ª Sweden</option>
                    <option value="CH">ðŸ‡¨ðŸ‡­ Switzerland</option>
                    <option value="SG">ðŸ‡¸ðŸ‡¬ Singapore</option>
                    <option value="AE">ðŸ‡¦ðŸ‡ª United Arab Emirates</option>
                    <option value="SA">ðŸ‡¸ðŸ‡¦ Saudi Arabia</option>
                </select>
            </div>

            <!-- Submit Button -->
            <button type="submit">
                <div class="button-content">
                    <span class="spinner" id="spinner"></span>
                    <span id="button-text">Sign In</span>
                </div>
            </button>
        </form>

        <!-- Toggle Section -->
        <div class="toggle-section">
            <p class="toggle-text">
                <span id="toggle-prompt">Don't have an account?</span>
                <a id="toggle-link">Sign Up</a>
            </p>
            <p class="toggle-text forgot-password" id="forgot-password-link">
                <a href="#" id="forgot-link">Forgot password?</a>
            </p>
        </div>
    </div>

    <script>
        // Configuration
        const API_URL = "http://localhost:5000";
        
        // DOM Elements
        const form = document.getElementById("auth-form");
        const formTitle = document.getElementById("form-title");
        const subtitle = document.getElementById("subtitle");
        
        const nameGroup = document.getElementById("name-group");
        const nameInput = document.getElementById("name");
        const useridInput = document.getElementById("userid");
        const emailGroup = document.getElementById("email-group");
        const emailInput = document.getElementById("email");
        const passwordInput = document.getElementById("password");
        const roleSelect = document.getElementById("role");
        const roleDescription = document.getElementById("role-description");
        const confirmPasswordGroup = document.getElementById("confirm-password-group");
        const confirmPasswordInput = document.getElementById("confirm-password");
        const countryGroup = document.getElementById("country-group");
        const countrySelect = document.getElementById("country");
        
        const buttonText = document.getElementById("button-text");
        const spinner = document.getElementById("spinner");
        const submitButton = form.querySelector("button[type='submit']");
        
        const toggleLink = document.getElementById("toggle-link");
        const togglePrompt = document.getElementById("toggle-prompt");
        const forgotPasswordLink = document.getElementById("forgot-password-link");
        
        const passwordStrength = document.getElementById("password-strength");
        const passwordStrengthBar = document.getElementById("password-strength-bar");

        let isSignUpMode = false;

        // Role descriptions
        const roleDescriptions = {
            "": "Select your role to access appropriate features",
            "admin": "Full system access including user management and analytics",
            "manager": "Team management and expense approval capabilities",
            "employee": "Submit and track personal expense reports"
        };

        // Update role description when selection changes
        roleSelect.addEventListener('change', (e) => {
            roleDescription.textContent = roleDescriptions[e.target.value] || roleDescriptions[""];
        });

        // Password Strength Checker
        function checkPasswordStrength(password) {
            if (!isSignUpMode) return;
            
            if (password.length === 0) {
                passwordStrength.classList.remove('active');
                return;
            }
            
            passwordStrength.classList.add('active');
            
            let strength = 0;
            if (password.length >= 8) strength++;
            if (password.match(/[a-z]/) && password.match(/[A-Z]/)) strength++;
            if (password.match(/[0-9]/)) strength++;
            if (password.match(/[^a-zA-Z0-9]/)) strength++;
            
            passwordStrengthBar.className = 'password-strength-bar';
            if (strength <= 1) {
                passwordStrengthBar.classList.add('weak');
            } else if (strength <= 3) {
                passwordStrengthBar.classList.add('medium');
            } else {
                passwordStrengthBar.classList.add('strong');
            }
        }

        passwordInput.addEventListener('input', (e) => {
            checkPasswordStrength(e.target.value);
        });

        // Notification System
        function showNotification(message, isError = false) {
            const notification = document.getElementById("notification");
            notification.textContent = message;
            notification.className = isError ? 'error show' : 'success show';
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 4000);
        }

        // Loading State
        function setLoading(isLoading) {
            if (isLoading) {
                spinner.classList.add('active');
                submitButton.disabled = true;
            } else {
                spinner.classList.remove('active');
                submitButton.disabled = false;
            }
        }

        // Toggle Between Sign In and Sign Up
        function toggleMode() {
            isSignUpMode = !isSignUpMode;
            
            // Reset form
            form.reset();
            passwordStrength.classList.remove('active');
            roleDescription.textContent = roleDescriptions[""];
            
            if (isSignUpMode) {
                formTitle.textContent = "Create Account";
                subtitle.textContent = "Join our expense management platform";
                
                nameGroup.classList.remove('hidden');
                nameInput.required = true;
                
                emailGroup.classList.remove('hidden');
                emailInput.required = true;
                
                confirmPasswordGroup.classList.remove('hidden');
                confirmPasswordInput.required = true;
                
                countryGroup.classList.remove('hidden');
                countrySelect.required = true;
                
                forgotPasswordLink.style.display = 'none';
                
                passwordInput.setAttribute('autocomplete', 'new-password');
                useridInput.setAttribute('autocomplete', 'username');
                
                buttonText.textContent = "Sign Up";
                togglePrompt.textContent = "Already have an account?";
                toggleLink.textContent = "Sign In";
            } else {
                formTitle.textContent = "Sign In";
                subtitle.textContent = "Welcome back! Please sign in to continue";
                
                nameGroup.classList.add('hidden');
                nameInput.required = false;
                
                emailGroup.classList.add('hidden');
                emailInput.required = false;
                
                confirmPasswordGroup.classList.add('hidden');
                confirmPasswordInput.required = false;
                
                countryGroup.classList.add('hidden');
                countrySelect.required = false;
                
                forgotPasswordLink.style.display = 'block';
                
                passwordInput.setAttribute('autocomplete', 'current-password');
                useridInput.setAttribute('autocomplete', 'username');
                
                buttonText.textContent = "Sign In";
                togglePrompt.textContent = "Don't have an account?";
                toggleLink.textContent = "Sign Up";
            }
        }

        toggleLink.addEventListener('click', (e) => {
            e.preventDefault();
            toggleMode();
        });

        // Form Submission
        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const userid = useridInput.value.trim();
            const password = passwordInput.value;
            const role = roleSelect.value;
            
            // Basic Validation
            if (!userid || !password || !role) {
                showNotification("Please fill in all required fields", true);
                return;
            }
            
            if (password.length < 6) {
                showNotification("Password must be at least 6 characters", true);
                return;
            }
            
            setLoading(true);
            
            if (isSignUpMode) {
                await handleSignUp(userid, password, role);
            } else {
                await handleSignIn(userid, password, role);
            }
            
            setLoading(false);
        });

        // Sign Up Handler
        async function handleSignUp(userid, password, role) {
            const name = nameInput.value.trim();
            const email = emailInput.value.trim();
            const confirmPassword = confirmPasswordInput.value;
            const country = countrySelect.value;
            
            // Sign Up Validation
            if (!name) {
                showNotification("Please enter your full name", true);
                return;
            }
            
            if (name.length < 2) {
                showNotification("Name must be at least 2 characters", true);
                return;
            }
            
            if (!email) {
                showNotification("Please enter your email address", true);
                return;
            }
            
            if (!isValidEmail(email)) {
                showNotification("Please enter a valid email address", true);
                return;
            }
            
            if (!country) {
                showNotification("Please select your country", true);
                return;
            }
            
            if (password !== confirmPassword) {
                showNotification("Passwords do not match", true);
                return;
            }
            
            if (password.length < 8) {
                showNotification("Password should be at least 8 characters for security", true);
                return;
            }
            
            try {
                const res = await fetch(`${API_URL}/register`, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ 
                        id: userid,
                        name, 
                        email, 
                        password, 
                        country, 
                        role: role 
                    })
                });
                
                const data = await res.json();
                
                if (!res.ok) {
                    throw new Error(data.message || "Registration failed");
                }
                
                showNotification("Account created successfully! Please sign in");
                
                // Switch to sign in mode after successful registration
                setTimeout(() => {
                    toggleMode();
                }, 1500);
                
            } catch (error) {
                showNotification(error.message || "Registration failed. Please try again", true);
            }
        }

        // Sign In Handler
        async function handleSignIn(userid, password, role) {
            try {
                const res = await fetch(`${API_URL}/login`, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ 
                        id: userid, 
                        password, 
                        role 
                    })
                });
                
                const data = await res.json();
                
                if (!res.ok) {
                    throw new Error(data.message || "Sign in failed");
                }
                
                showNotification(`Sign in successful as ${role}! Redirecting...`);
                
                // Store user data if needed (in a real app, use secure token storage)
                // sessionStorage.setItem('userRole', role);
                // sessionStorage.setItem('userId', userid);
                
                // Redirect based on role
                setTimeout(() => {
                    switch(role) {
                        case "employee":
                            window.location.href = "employee.html";
                            break;
                        case "manager":
                            window.location.href = "manager.html";
                            break;
                        case "admin":
                            window.location.href = "admin.html";
                            break;
                        default:
                            showNotification("Invalid user role", true);
                    }
                }, 1200);
                
            } catch (error) {
                showNotification(error.message || "Sign in failed. Please check your credentials", true);
            }
        }

        // Email Validation
        function isValidEmail(email) {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
        }

        // Forgot Password Handler
        document.getElementById('forgot-link').addEventListener('click', (e) => {
            e.preventDefault();
            showNotification("Password reset feature coming soon!");
        });

        // Auto-focus on userid field when page loads
        window.addEventListener('load', () => {
            useridInput.focus();
        });
    </script>
</body>
</html>